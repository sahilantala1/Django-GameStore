{% extends 'base_a.html' %}
{% load static %}
{% block start %}
{% include 'navbar.html' %}
    <!-- Bootstrap 5 CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background-color: #f0f2f5;
        font-family: 'Segoe UI', sans-serif;
      }

      .container-custom {
        margin-top: 60px;
        max-width: 1200px;
        padding: 30px;
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      }

      .table thead th {
        vertical-align: middle;
        border-bottom: none;
      }

      .table td {
        border-top: none;
      }

      .badge-yes {
        background-color: #28a745;
      }

      .badge-no {
        background-color: #dc3545;
      }

      .btn-add {
        background-color: #007bff;
        color: white;
        font-weight: bold;
        border-radius: 6px;
      }

      .search-input {
        max-width: 250px;
      }

      .table-hover tbody tr:hover {
        background-color: #f1f5f9;
      }

      .table-highlight {
        border-left: 4px solid #007bff;
        background-color: #f0f8ff;
      }

      .section-title {
        font-weight: 600;
        font-size: 1.6rem;
      }

      .search-box input {
        border-radius: 6px;
      }
      .product-img{
        width: auto;
        height: 100px;
      }
      </style>
  </head>
  <body>
    <div class="container container-custom">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="section-title">
          Total Product: <span class="text-muted">({{ products|length }})</span>
           <a href="{% url 'add_product' %}" class="btn btn-primary add-btn">Add New Product</a>
        </div>
         <form method="GET" class="mb-4">
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Search by name or category..." value="{{ request.GET.q }}">
      <button type="submit" class="btn btn-dark">Search</button>
    </div>
  </form>
      </div>

      <!-- Table without inner borders -->
      <table class="table table-hover rounded">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th>Preview</th>
            <th>Description</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Category</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for product in products %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>
              {% if product.image %}
              <img
                src="{{ product.image.url }}"
                alt="{{ product.name }}"
                class="product-img"
              />
              {% else %}
              <span>No Image</span>
              {% endif %}
            </td>
            <td>{{ product.name }}</td>
            <td>${{ product.price }}</td>
            <td>{{ product.stock }}</td>
            <td>{{ product.category }}</td>
            <td>
              <a
                class="btn btn-primary btn-sm"
                href="{% url 'edit_product' product.id %}"
                >Edit</a
              >
              <button
                class="btn btn-danger btn-sm"
                onclick="confirmDelete({{ product.id }})"
              >
                Delete
              </button>

              <form
                id="delete-form-{{ product.id }}"
                method="POST"
                action="{% url 'delete_product' product.id %}"
                style="display: none"
              >
                {% csrf_token %}
              </form>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" class="text-center">No products found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <script>
      function confirmDelete(productId) {
        if (confirm('Are you sure you want to delete this product?')) {
          document.getElementById('delete-form-' + productId).submit();
        }
      }

      function submitForm() {
        document.getElementById('filter-form').submit();
      }
    </script>
    <!-- Bootstrap JS Bundle (Optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>



{% endblock %}
